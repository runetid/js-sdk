!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react-admin"),require("ra-data-json-server"));else if("function"==typeof define&&define.amd)define(["react-admin","ra-data-json-server"],t);else{var n="object"==typeof exports?t(require("react-admin"),require("ra-data-json-server")):t(e["react-admin"],e["ra-data-json-server"]);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,((e,t)=>(()=>{"use strict";var n={351:e=>{e.exports=t},499:t=>{t.exports=e}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{function e(e,t,n){var r=n.getInstance().getHeaders(),o=new Request(t+"/user/byToken/"+e.token,{method:"GET",headers:new Headers({"Content-Type":"application/json",ApiKey:r.ApiKey,Hash:r.Hash,Time:r.Time})});return fetch(o).then((function(e){if(200==e.status)return e.json()})).then((function(t){localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(t))}))}o.r(a),o.d(a,{authProviderCallback:()=>n,authUserByToken:()=>e,dataProviderCallback:()=>p});var t,n=function(t,n){return{login:function(r){var o=r.username,a=r.password,i=n.getInstance().getHeaders(),c=new Request(t+"/user/login",{method:"POST",body:JSON.stringify({login:o,password:a}),headers:new Headers({"Content-Type":"application/json",ApiKey:i.ApiKey,Hash:i.Hash,Time:i.Time})});return fetch(c).then((function(e){return e.status<200||e.status>=300?Promise.reject(e.statusText):e.json()})).then((function(r){return console.log("authData",r),e(r,t,n)})).catch((function(){return Promise.reject("Invalid username or password")}))},logout:function(){localStorage.removeItem("user");var e=localStorage.getItem("token");localStorage.removeItem("token");var r=n.getInstance().getHeaders(),o=new Request(t+"/user/logout/",{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(e),ApiKey:r.ApiKey,Hash:r.Hash,Time:r.Time})});return fetch(o),Promise.resolve()},checkError:function(){return Promise.resolve()},checkAuth:function(){return localStorage.getItem("user")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve(void 0)},getIdentity:function(){var e=localStorage.getItem("user"),t=e?JSON.parse(e):null;return Promise.resolve(t)}}},r=o(499),i=o(351),c=o.n(i),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function u(e,t){void 0===t&&(t=null);var n=[];for(var r in e){var o=t?t+"["+r+"]":r,a=typeof e[r];if("meta"!==o)switch(a){case"object":n=n.concat(u(e[r],o));break;case"function":break;default:n.push(o+"="+encodeURI(e[r]))}}return n.join("&")}!function(e){e.GET="GET",e.PUT="PUT",e.DELETE="DELETE",e.PATCH="PATCH",e.OPTIONS="OPTIONS",e.POST="POST"}(t||(t={}));var p=function(e,t){var n=function(e,n){void 0===n&&(n={mode:"no-cors"});var o=localStorage.getItem("token");if(!n.headers){var a=t.getInstance().getHeaders();n.headers=new Headers({Accept:"application/json",Authorization:"Bearer ".concat(o),ApiKey:a.ApiKey,Hash:a.Hash,Time:a.Time})}return r.fetchUtils.fetchJson(e,n)},o=c()(e,n);return s(s({},o),{fetch:function(t,r,o){var a={method:r};return o&&(a.body=JSON.stringify(o)),n("".concat(e,"/").concat(t),a)},getList:function(t,r){var o=u(r),a=r.pagination.perPage,i=0;r.pagination.page&&r.pagination.perPage&&(a=r.pagination.perPage,i=r.pagination.page*r.pagination.perPage-r.pagination.perPage);var c=t.includes("?")?"&":"?";return n("".concat(e,"/").concat(t,"/list").concat(c,"limit=").concat(a,"&offset=").concat(i,"&").concat(o),{method:"GET"}).then((function(e){return e.json}))},getManyReference:function(t,r){var o=u(r),a=r.pagination.perPage,i=0;r.pagination.page&&r.pagination.perPage&&(a=r.pagination.perPage,i=r.pagination.page*r.pagination.perPage-r.pagination.perPage);var c=t.includes("?")?"&":"?";return n("".concat(e,"/").concat(t,"/list").concat(c,"limit=").concat(a,"&offset=").concat(i,"&").concat(o),{method:"GET"}).then((function(e){return e.json}))},getOne:function(t,r){return n("".concat(e,"/").concat(t,"/").concat(r.id),{method:"GET"}).then((function(e){return e.json}))},create:function(t,r){return n("".concat(e,"/").concat(t),{method:"POST",body:JSON.stringify(r.data)}).then((function(e){return{data:e.json}}))}})}})(),a})()));